{% extends "base.html" %}
{% load static %}

{% block content %}
<h2><strong>ANALYSIS</strong></h2>
<h2>Boolean Analysis of Datasets</h2>

{% if not results %}
    <p>You will receive dataset overlap statistics for intersection calculations involving exactly two datasets.</p>
    {% include '_abbreviation_info.html' %}
    <p>&nbsp;</p>
    <form name="boolean-analysis-form" id="boolean-analysis-form" method="get" action="{% url 'inia:boolean_dataset' %}" >
        <div class="row" >
            <div class="col-6" >
                <h5><strong>Datasets</strong></h5>
                {% for pub in publications %}
                    <p class="dataset-checkbox-title">{{pub.get_short_name}}</p>
                    <div class="indented-dataset-parent">
                        <div class="form-check form-check">
                            <input class="form-check-input" name="ds" type="checkbox" id="{{ pub.htmlid }}" value="{{ pub.htmlid }}" />
                            <label class="form-check-label" for="{{ pub.htmlid }}">{{ pub.htmlid }}</label>
                        </div>
                        {% for ds in pub.dataset_set.all %}
                            <div class="form-check form-check indented-dataset-child">
                                <input class="form-check-input" name="ds" type="checkbox" id="{{ ds.name }}" value="{{ ds.id }}" />
                                    <label class="form-check-label" for="{{ ds.name }}">{{ ds.name }}</label>
                            </div>
                        {% endfor %}
                        <br />
                    </div>
                {% endfor %}
                </div>
            <div class="col-6" >
                <div class="info-box">
                <h5><strong>Brain Regions</strong></h5>
                    {% for br in brain_regions %}
                        <div class="form-check form-check">
                            <input class="form-check-input" type="checkbox" name="br" id="{{ br.name }}" value="{{ br.id }}">
                                <label class="form-check-label" for="{{ br.name }}">{{ br.name }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>

        </div>

    <button name="operation" value="intersect" class="boolean-dataset-form-button">Intersect</button>
    <button name="operation" value="union" class="boolean-dataset-form-button">Union</button>
    <br />
    <button name="clear" class="clear boolean-dataset-form-button">Clear all selections</button>
    </form>
{% else %}

    aaaahhh

{% endif %}
{% endblock %}
{% block extrajs %}
<script type="text/javascript">
$().ready(() => {
    $('.clear').on('click', (e) => {
       e.preventDefault();
       $('.form-check-input').prop( "checked", false );
    });

});

</script>
{% endblock %}